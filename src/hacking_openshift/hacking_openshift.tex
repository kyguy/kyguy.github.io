%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% hacking_openshift.tex
% 
% Latex source to be converted to HTML by tex4ht
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PREAMBLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Import common configurations and custom functions
\input{../config}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DOCUMENT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\iffalse
I don't want this to happen
# PREP DOCKER
sudo vi /etc/sysconfig/docker
Need to add correct registry ips
---- add line ---
ADD_REGISTRY='--add-registry 172.30.0.0/16'
INSECURE_REGISTRY='-insecure-registry 172.30.0.0/16'
-------------
   INSTALL
-------------
sudo dnf install git docker-latest

mkdir $HOME/go

sudo dnf install golang golang-race make gcc zip mercurial krb5-devel bsdtar bc rsync bind-utils file jq tito createrepo openssl gpgme gpgme-devel libassuan libassuan-devel

# In ~/.bashrc
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin
export OS_OUTPUT_GOPATH=1
export GOROOT=/usr/local/go
export PATH=$GOPATH/bin:$GOROOT/bin:$PATH

# then
source ~/.bashrc

mkdir -p $GOPATH/src/github.com/openshift
cd $GOPATH/src/github.com/openshift
#curl -s https://github.com/openshift/origin/tags | egrep -o '\<v.*tar.gz\>' | head -2
#wget https://github.com/openshift/origin/archive/v3.7.0-alpha.1.tar.gz
#tar -xf v3.7.0-alpha.1.tar.gz
git clone https://github.com/openshift/origin.git
cd origin

-----------------
# PREP OPENSHIFT
make build  WHAT=cmd/openshift GOFLAGS=-ldflags "-w"
make build  WHAT=cmd/oc GOFLAGS=-ldflags "-w"
cd _output/local/bin/linux/amd64

systemctl stop firewalld
systemctl restart docker
##########################################################
# INSTALL OPENSHIFT ######################################
##########################################################
sudo ./openshift start

chmod 777 openshift.local.config/master/admin.kubeconfig
./oc adm registry -n default --config=openshift.local.config/master/admin.kubeconfig --service-account=registry

./oc adm policy add-cluster-role-to-user cluster-admin admin --config=openshift.local.config/master/admin.kubeconfig

oc login admin

./oc adm policy add-scc-to-user hostnetwork -z router --config=openshift.local.config/master/admin.kubeconfig

oc adm router --replicas=1 --service-account=router
##########################################################
###########################################################

### hawkular metrics ##############################################
oc delete all --selector="metrics-infra"
oc delete templates --selector="metrics-infra"
oc delete secrets --selector="metrics-infra"
oc delete pvc --selector="metrics-infra"
oc delete sa --selector="metrics-infra"

# Change version to v5
https://raw.githubusercontent.com/openshift/openshift-ansible/master/roles/openshift_hosted_templates/files/v1.4/enterprise/metrics-deployer.yaml

oc create -f metrics-deployer-setup.yaml -n openshift-infra

oc adm policy add-role-to-user cluster-admin system:serviceaccount:openshift-infra:metrics-deployer
oc adm policy add-role-to-user edit system:serviceaccount:openshift-infra:metrics-deployer
oc adm policy add-cluster-role-to-user cluster-admin system:serviceaccount:openshift-infra:heapster
oc adm policy add-cluster-role-to-user cluster-reader system:serviceaccount:openshift-infra:heapster
oc adm policy add-role-to-user view system:serviceaccount:openshift-infra:hawkular -n openshift-infra
oc secrets new metrics-deployer nothing=/dev/null

oc process -f metrics-deployer.yaml -p HAWKULAR_METRICS_HOSTNAME=metrics.127.0.0.1.xip.io  -p USE_PERSISTENT_STORAGE=false | oc create -f -

oc process -f metrics-deployer.yaml -p HAWKULAR_METRICS_HOSTNAME=metrics-openshift-infra.192.168.0.20.xip.io  -p USE_PERSISTENT_STORAGE=false | oc create -f -

oc process -f metrics-deployer.yaml -p HAWKULAR_METRICS_HOSTNAME=hawkular-metrics.example.com -p USE_PERSISTENT_STORAGE=false | oc create -f -

# Hawkular agent
oc create -f deploy/openshift/hawkular-openshift-agent-configmap.yaml -n default
oc process -f deploy/openshift/hawkular-openshift-agent.yaml | oc create -n default -f -
oc adm policy add-cluster-role-to-user hawkular-openshift-agent system:serviceaccount:default:hawkular-openshift-agent

# Remove Hawkular agent
oc delete all,secrets,sa,templates,configmaps,daemonsets,clusterroles --selector=metrics-infra=agent -n default
oc delete clusterroles hawkular-openshift-agent
\fi
\begin{document}

\centerline{\sc \large kglyphs}
\centerline{\sc Practicum for the Layperson }
%\centerline{\url{https://github.com/jboss-openshift/ce-testsuite.git/}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% HACKING OPENSHIFT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure}
\begin{tikzpicture}[node distance = 1cm and 0cm]

      \node[circle, fill=red] () {test};

\end{tikzpicture}
\end{figure}


\end{document}
